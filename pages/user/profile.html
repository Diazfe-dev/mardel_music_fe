<!doctype html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mi Perfil - MardelMusic</title>
</head>

<body class="flex flex-col bg-darker md:w-full h-full">
    <nav class="flex flex-row items-center bg-transparent p-8 h-20">
        <div class="justify-start grow">
            <a href="../dashboard.html" class="font-bold text-light text-2xl">
                MardelMusic
            </a>
        </div>
        <div class="relative flex justify-end items-center gap-4 grow-1">
            <div class="relative flex justify-center items-center bg-dark shadow-md rounded-full w-8 h-8">
                <button id="notification-bell"
                    class="flex justify-center items-center bg-darker opacity-50 hover:opacity-100 backdrop-blur-2xl rounded-full w-8 h-8 text-[#fefefe] transition cursor-pointer">
                    <i data-lucide="bell"></i>
                </button>
                <div id="notification-badge"
                    class="hidden -top-1 -right-1 absolute flex justify-center items-center bg-[#2B7FFFFF] px-1 rounded-full min-w-[20px] h-5 font-bold text-white text-xs">
                </div>
                <ul id="notification-dropdown"
                    class="hidden top-0 right-0 z-50 absolute flex flex-col bg-white shadow-xl mt-12 border border-gray-200 rounded-lg w-80 max-h-96 overflow-hidden text-black">
                </ul>
            </div>
            <div class="relative">
                <div class="flex justify-center items-center bg-dark shadow-md rounded-full w-12 h-12">
                    <button id="profile-img"
                        class="flex justify-center items-center bg-darker backdrop:blur-2xl rounded-full w-10 h-10 cursor-pointer">
                    </button>
                </div>
                <ul id="profile-dropdown"
                    class="hidden top-0 right-0 z-50 absolute flex flex-col gap-2 bg-dark shadow-lg mt-12 rounded-lg md:w-50 md:h-auto overflow-hidden text-black">
                </ul>
            </div>
        </div>
    </nav>

    <section class="bg-darker p-4 w-full min-h-screen">
        <div class="flex flex-col mx-auto rounded-lg w-full overflow-hidden">
            <div class="relative flex flex-row gap-12 shadow-lg p-12 profile-gradient">
                <div class="w-60 h-60" id="user-avatar-container">
                    <div
                        class="group relative flex justify-center items-center bg-dark shadow-md rounded-full w-60 h-60">
                        <img id="user-avatar-image" src="" alt="Imagen de perfil"
                            class="hidden bg-darker shadow-lg drop-shadow-[#242424] drop-shadow-xl rounded-full w-full h-full object-cover" />
                        <div id="user-avatar-uplaod-input"
                            class="right-4 bottom-4 absolute flex justify-center items-center bg-dark opacity-0 group-hover:opacity-100 shadow-lg rounded-full w-12 h-12 transition-all translate-y-4 group-hover:translate-y-0 duration-300 cursor-pointer">
                            <i data-lucide="square-pen"></i>
                        </div>
                    </div>
                    <input id="upload-profile-image-input" type="file" accept="image/*" class="hidden" />
                </div>
                <div class="self-center h-full">
                    <span
                        class="opacity-67 drop-shadow-[#242424 drop-shadow-xl mb-4 font-medium text-light text-lg">Perfil</span>
                    <h1 id="user-name"
                        class="opacity-80 drop-shadow-[#242424 drop-shadow-xl font-bold text-light text-6xl"></h1>
                </div>

                <div class="top-4 right-4 absolute drop-shadow-[#242424] drop-shadow-xl rounded-full">
                    <button id="edit-profile-button"
                        class="flex flex-row justify-center items-center bg-dark opacity-80 hover:opacity-90 shadow-md rounded-full w-10 h-10 transition-all cursor-pointer">
                        <i data-lucide="settings"></i>
                    </button>
                </div>
            </div>

            <div class="flex flex-col bg-dark drop-shadow-[#242424] drop-shadow-xl px-12 py-4">
                <div class="flex flex-row justify-between items-center mb-8 w-full h-full">
                    <h2 class="opacity-80 drop-shadow-[#242424] drop-shadow-xl font-bold text-light text-3xl">Artistas
                        que
                        sigo</h2>
                    <span
                        class="opacity-70 hover:opacity-90 drop-shadow-[#242424] drop-shadow-xl font-bold text-light text-sm transition-all cursor-pointer">Ver
                        todos</span>
                </div>

                <div class="flex flex-row gap-8">
                    <div
                        class="hover:inset-shadow-sm flex flex-col bg-dark hover:shadow-lg p-4 rounded-md w-50 h-70 transition-all profile-gradient">
                        <div
                            class="flex flex-row justify-center items-center content-center drop-shadow-[#242424] drop-shadow-xl">
                            <img class="shadow-xl rounded-full w-30 h-30 object-cover"
                                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRVwqFuoeC9GphTZhuNGzSpQAeUZuAetDGEyw&s" />
                        </div>
                        <div class="flex flex-col justify-end px-2 py-4 w-full h-1/2">
                            <span lass="text-light font-medium opacity-90">Artista</span>
                            <span class="font-medium text-light">Peces raros</span>
                        </div>
                    </div>

                    <div
                        class="hover:inset-shadow-sm flex flex-col bg-dark hover:shadow-lg p-4 rounded-md w-50 h-70 transition-all profile-gradient">
                        <div
                            class="flex flex-row justify-center items-center content-center drop-shadow-[#242424] drop-shadow-xl">
                            <img class="shadow-xl rounded-full w-30 h-30 object-cover"
                                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQoSY24NTb73wfbLvF0foXka4IJBCa92jv1_g&s" />
                        </div>
                        <div class="flex flex-col justify-end px-2 py-4 w-full h-1/2">
                            <span lass="text-light font-medium opacity-90">Artista</span>
                            <span class="font-medium text-light">Varese</span>
                        </div>
                    </div>

                    <div
                        class="hover:inset-shadow-sm flex flex-col bg-dark hover:shadow-lg p-4 rounded-md w-50 h-70 transition-all profile-gradient">
                        <div
                            class="flex flex-row justify-center items-center content-center drop-shadow-[#242424] drop-shadow-xl">
                            <img class="shadow-xl rounded-full w-30 h-30 object-cover"
                                src="https://i.scdn.co/image/ab67616d0000b2734ae1c4c5c45aabe565499163" />
                        </div>
                        <div class="flex flex-col justify-end px-2 py-4 w-full h-1/2">
                            <span lass="text-light font-medium opacity-90">Artista</span>
                            <span class="font-medium text-light">Arctic Monkeys</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex flex-col bg-dark drop-shadow-[#242424] drop-shadow-xl px-12 py-4">
                <div class="flex flex-row justify-between items-center mb-8 w-full h-full">
                    <h2 class="opacity-80 drop-shadow-[#242424] drop-shadow-xl font-bold text-light text-3xl">Proximos
                        eventos </h2>
                    <span
                        class="opacity-70 hover:opacity-90 drop-shadow-[#242424] drop-shadow-xl font-bold text-light text-sm transition-all cursor-pointer">Ver
                        todos</span>
                </div>

                <div class="flex flex-row gap-8">
                    <div
                        class="hover:inset-shadow-sm flex flex-col bg-dark hover:shadow-lg p-4 rounded-md w-50 h-70 transition-all profile-gradient">
                        <div
                            class="flex flex-row justify-center items-center content-center drop-shadow-[#242424] drop-shadow-xl">
                            <img class="shadow-xl rounded-full w-30 h-30 object-cover"
                                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRVwqFuoeC9GphTZhuNGzSpQAeUZuAetDGEyw&s" />
                        </div>
                        <div class="flex flex-col justify-end px-2 py-4 w-full h-1/2">
                            <span lass="text-light font-medium opacity-90">Artista</span>
                            <span class="font-medium text-light">Peces raros</span>
                        </div>
                    </div>

                    <div
                        class="hover:inset-shadow-sm flex flex-col bg-dark hover:shadow-lg p-4 rounded-md w-50 h-70 transition-all profile-gradient">
                        <div
                            class="flex flex-row justify-center items-center content-center drop-shadow-[#242424] drop-shadow-xl">
                            <img class="shadow-xl rounded-full w-30 h-30 object-cover"
                                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQoSY24NTb73wfbLvF0foXka4IJBCa92jv1_g&s" />
                        </div>
                        <div class="flex flex-col justify-end px-2 py-4 w-full h-1/2">
                            <span lass="text-light font-medium opacity-90">Artista</span>
                            <span class="font-medium text-light">Varese</span>
                        </div>
                    </div>

                    <div
                        class="hover:inset-shadow-sm flex flex-col bg-dark hover:shadow-lg p-4 rounded-md w-50 h-70 transition-all profile-gradient">
                        <div
                            class="flex flex-row justify-center items-center content-center drop-shadow-[#242424] drop-shadow-xl">
                            <img class="shadow-xl rounded-full w-30 h-30 object-cover"
                                src="https://i.scdn.co/image/ab67616d0000b2734ae1c4c5c45aabe565499163" />
                        </div>
                        <div class="flex flex-col justify-end px-2 py-4 w-full h-1/2">
                            <span lass="text-light font-medium opacity-90">Artista</span>
                            <span class="font-medium text-light">Arctic Monkeys</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="flex flex-row items-center shadow-lg p-8 h-20">
        <div class="justify-start grow">
            <a href="./dashboard.html" class="font-bold text-light text-md">
                MardelMusic © 2024
            </a>
        </div>
    </footer>

    <script type="module" src="/src/main.js"></script>
    <script type="module">
        import authHandler from "/src/handlers/auth.handler.js";
        import LayoutHandler from "/src/handlers/layout-handler.js";
        import NotificationHandler from "/src/handlers/notification.handler.js";
        import ProfileHandler from "/src/handlers/user-profile.handler.js";
        import AuthGuard from "/src/utils/auth.guard.js";

        const layoutHandler = new LayoutHandler();
        const notificationHandler = new NotificationHandler();
        const profileHandler = new ProfileHandler();

        authHandler.subscribe(AuthGuard);
        authHandler.subscribe(layoutHandler.setupLayout);
        authHandler.subscribe(() => notificationHandler.init());
        authHandler.subscribe((user) => profileHandler.init(user));
        await authHandler.getUserProfile();
        window.refreshIcons();
    </script>
</body>

</html>