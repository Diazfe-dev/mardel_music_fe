<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Mi Perfil - MardelMusic</title>
</head>
<body class="flex flex-col md:w-full h-screen md:overflow-hidden bg-darker">
<nav class="flex flex-row items-center p-8 h-20 bg-transparent">
    <div class="grow justify-start">
        <a href="./dashboard.html" class="text-2xl font-bold text-light ">
            MardelMusic
        </a>
    </div>
    <div class="grow-1 relative flex justify-end items-center gap-4">
        <div class="relative w-8 h-8 bg-dark rounded-full flex items-center justify-center shadow-md">
            <button id="notification-bell"
                    class="text-[#fefefe] backdrop-blur-2xl bg-darker opacity-50 rounded-full hover:opacity-100 w-8 h-8 transition flex items-center justify-center cursor-pointer">
                <i data-lucide="bell"></i>
            </button>
            <div id="notification-badge"
                 class="hidden absolute -top-1 -right-1 rounded-full bg-[#2B7FFFFF] min-w-[20px] h-5 flex items-center justify-center text-white text-xs font-bold px-1">
            </div>
            <ul id="notification-dropdown"
                class="hidden absolute top-0 right-0 overflow-hidden mt-12 w-80 max-h-96 bg-white text-black rounded-lg shadow-xl border border-gray-200 flex flex-col z-50">
            </ul>
        </div>
        <div class="relative">
            <div class="w-12 h-12 bg-dark rounded-full flex items-center justify-center shadow-md">
                <button id="profile-img"
                        class="w-10 h-10 bg-darker rounded-full flex items-center justify-center cursor-pointer backdrop:blur-2xl">
                </button>
            </div>
            <ul id="profile-dropdown"
                class="hidden overflow-hidden absolute top-0 right-0 mt-12 md:w-50 md:h-auto bg-dark text-black rounded-lg shadow-lg flex flex-col gap-2 z-50">
            </ul>
        </div>
    </div>
</nav>

<section class="w-full min-h-screen p-4 bg-darker">
    <div class="w-full mx-auto flex flex-col rounded-lg overflow-hidden">

        <div class="flex flex-row profile-gradient shadow-lg p-12 gap-12 ">
            <div class="w-60 h-60" id="user-avatar-container">
                <div class="w-60 h-60 bg-dark rounded-full flex items-center justify-center shadow-md relative group">
                    <img
                            id="user-avatar-image"
                            src=""
                            alt=""
                            class="w-full h-full rounded-full object-cover shadow-lg bg-darker drop-shadow-xl drop-shadow-[#242424]"
                    />
                    <div id="user-avatar-uplaod-input"
                         class="absolute bottom-4 right-4 w-12 h-12 bg-dark flex items-center justify-center rounded-full shadow-lg cursor-pointer opacity-0 translate-y-4 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0">
                        <i data-lucide="square-pen"></i>
                    </div>
                </div>
                <input id="upload-profile-image-input" type="file" class="invisible"/>
            </div>

            <div class="h-full self-center">
                <span class="text-lg font-medium text-light opacity-67 mb-4 drop-shadow-xl drop-shadow-[#242424">Perfil</span>
                <h1 id="user-name"
                    class="text-6xl font-bold text-light opacity-80 drop-shadow-xl drop-shadow-[#242424"></h1>
            </div>
        </div>

        <div class="flex flex-col bg-dark drop-shadow-xl drop-shadow-[#242424] px-12 py-4 ">
            <div class="h-full w-full mb-8 flex flex-row justify-between items-center">
                <h2 class="text-3xl font-bold text-light opacity-80 drop-shadow-xl drop-shadow-[#242424]">Artistas que
                    sigo</h2>
                <span class="text-sm font-bold text-light opacity-70 hover:opacity-90 transition-all drop-shadow-xl drop-shadow-[#242424] cursor-pointer">Ver todos</span>
            </div>

            <div class="flex flex-row gap-8 ">
                <div class="w-50 h-70 bg-dark rounded-md flex flex-col p-4 profile-gradient hover:shadow-lg hover:inset-shadow-sm transition-all">
                    <div class="flex flex-row justify-center items-center content-center drop-shadow-xl drop-shadow-[#242424]">
                        <img class="w-30 h-30 rounded-full object-cover shadow-xl"
                             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRVwqFuoeC9GphTZhuNGzSpQAeUZuAetDGEyw&s"/>
                    </div>
                    <div class="w-full h-1/2 flex flex-col justify-end py-4 px-2">
                        <span lass="text-light font-medium opacity-90">Artista</span>
                        <span class="text-light font-medium">Peces raros</span>
                    </div>
                </div>

                <div class="w-50 h-70 bg-dark rounded-md flex flex-col p-4 profile-gradient hover:shadow-lg hover:inset-shadow-sm transition-all">
                    <div class="flex flex-row justify-center items-center content-center drop-shadow-xl drop-shadow-[#242424]">
                        <img class="w-30 h-30 rounded-full object-cover shadow-xl"
                             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQoSY24NTb73wfbLvF0foXka4IJBCa92jv1_g&s"/>
                    </div>
                    <div class="w-full h-1/2 flex flex-col justify-end py-4 px-2">
                        <span lass="text-light font-medium opacity-90">Artista</span>
                        <span class="text-light font-medium">Varese</span>
                    </div>
                </div>

                <div class="w-50 h-70 bg-dark rounded-md flex flex-col p-4 profile-gradient hover:shadow-lg hover:inset-shadow-sm transition-all">
                    <div class="flex flex-row justify-center items-center content-center drop-shadow-xl drop-shadow-[#242424]">
                        <img class="w-30 h-30 rounded-full object-cover shadow-xl"
                             src="https://i.scdn.co/image/ab67616d0000b2734ae1c4c5c45aabe565499163"/>
                    </div>
                    <div class="w-full h-1/2 flex flex-col justify-end py-4 px-2">
                        <span lass="text-light font-medium opacity-90">Artista</span>
                        <span class="text-light font-medium">Arctic Monkeys</span>
                    </div>
                </div>
            </div>
        </div>


    </div>
</section>

<script type="module" src="/src/main.js"></script>
<script type="module">
    import authHandler from "./src/handlers/auth.handler.js";
    import LayoutHandler from "./src/handlers/layout-handler.js";
    import NotificationHandler from "./src/handlers/notification.handler.js";
    import ProfileHandler from "./src/handlers/profile.handler.js";
    import AuthGuard from "./src/utils/auth.guard.js";

    const layoutHandler = new LayoutHandler();
    const notificationHandler = new NotificationHandler();
    const profileHandler = new ProfileHandler();

    authHandler.subscribe(AuthGuard);
    authHandler.subscribe(layoutHandler.setupLayout);
    authHandler.subscribe(() => notificationHandler.init());
    authHandler.subscribe((user) => profileHandler.init(user));
    await authHandler.getUserProfile();
    window.refreshIcons();
</script>
</body>
</html>